<script>
  let links = JSON.parse(localStorage.getItem("links")) || [
    { name: "Google", url: "https://google.com" },
    { name: "YouTube", url: "https://youtube.com" },
    { name: "ChatGPT", url: "https://chat.openai.com" }
  ];

  const list = document.getElementById("linkList");

  function renderLinks() {
    list.innerHTML = "";
    links.forEach((link, index) => {
      const item = document.createElement("div");
      item.className = "link-item";
      item.draggable = true;
      item.dataset.index = index;

      item.innerHTML = `
        <a href="${link.url}" target="_blank">${link.name}</a>
        <div class="buttons">
          <button onclick="editLink(${index})">Editar</button>
        </div>
      `;

      item.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", index);
      });

      item.addEventListener("dragover", e => e.preventDefault());

      item.addEventListener("drop", e => {
        e.preventDefault();
        const from = e.dataTransfer.getData("text/plain");
        const to = index;
        [links[from], links[to]] = [links[to], links[from]];
        saveLinks();
        renderLinks();
      });

      list.appendChild(item);
    });
  }

  document.getElementById("addForm").addEventListener("submit", e => {
    e.preventDefault();
    const name = document.getElementById("newName").value.trim();
    const url = document.getElementById("newURL").value.trim();
    if (name && url) {
      links.push({ name, url });
      saveLinks();
      renderLinks();
      e.target.reset();
    }
  });

  function editLink(index) {
    const newName = prompt("Novo nome:", links[index].name);
    const newURL = prompt("Nova URL:", links[index].url);
    if (newName && newURL) {
      links[index] = { name: newName, url: newURL };
      saveLinks();
      renderLinks();
    }
  }

  function saveLinks() {
    localStorage.setItem("links", JSON.stringify(links));
  }

  renderLinks();
</script>
